<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profil - ZgranyTrener.pl</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../style-profil.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>

  <header>
    <div class="logo">
      <img src="img/logo.png" alt="Logo" height="54">
      <span>ZgranyTrener.pl</span>
    </div>
  </header>

  <main class="profil-container">
    <a href="dashboard.html" class="back-btn">‚Üê Powr√≥t</a>
    <img src="profil/avatar.png" alt="Avatar" class="avatar">

    <h1 id="user-name">
      <span id="name-display">Adam Nowak</span>
      <span id="edit-name" class="edit-icon" title="Edytuj imiƒô i nazwisko">‚úèÔ∏è</span>
    </h1>
    <p class="role">Trener</p>

    <section class="stats">
      <div class="info-box">
        <h3>Klub</h3>
        <p id="club-display">AP M≈Çodziaki</p>
        <span id="edit-club" class="edit-icon" title="Edytuj klub">‚úèÔ∏è</span>
      </div>
      <div class="info-box">
        <h3>Kategorie wiekowe</h3>
        <p id="categories-display">U9, U11, U12</p>
        <span id="edit-categories" class="edit-icon" title="Edytuj kategorie wiekowe">‚úèÔ∏è</span>
      </div>
    </section>

    <section class="stats">
      <div class="info-box">
        <h2>16</h2>
        <p>Rozegrane sparingi</p>
      </div>
      <div class="info-box">
        <h2>4</h2>
        <p>Zaplanowane sparingi</p>
      </div>
    </section>

    <section class="recent-matches">
      <h3>Ostatnie sparingi</h3>
      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Kategoria</th>
            <th>Mecz</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>13.04.2024</td>
            <td>U11</td>
            <td>AP M≈Çodziaki vs UKS Wilan√≥w</td>
          </tr>
          <tr>
            <td>06.04.2024</td>
            <td>U9</td>
            <td>FC Talent vs AP M≈Çodziaki</td>
          </tr>
          <tr>
            <td>24.03.2024</td>
            <td>U12</td>
            <td>AP M≈Çodziaki vs MKS Delta</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <!-- üîí Zabezpieczenie strony przed wej≈õciem bez logowania -->
  <script src="auth-check.js"></script>

  <!-- ‚úÖ Jeden poprawny skrypt -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const nameDisplay = document.getElementById("name-display");
    const editNameBtn = document.getElementById("edit-name");
    const clubDisplay = document.getElementById("club-display");
    const editClubBtn = document.getElementById("edit-club");
    const categoriesDisplay = document.getElementById("categories-display");
    const editCategoriesBtn = document.getElementById("edit-categories");

    // --- Imiƒô i nazwisko ---
    const savedName = localStorage.getItem("userName");
    if (savedName) nameDisplay.textContent = savedName;

    editNameBtn.addEventListener("click", () => {
      const currentName = nameDisplay.textContent;
      const input = document.createElement("input");
      input.type = "text";
      input.value = currentName;
      input.classList.add("edit-input");
      nameDisplay.replaceWith(input);
      input.focus();

      const save = () => {
        const newName = input.value.trim() || "Adam Nowak";
        localStorage.setItem("userName", newName);
        const span = document.createElement("span");
        span.id = "name-display";
        span.textContent = newName;
        input.replaceWith(span);
      };

      input.addEventListener("blur", save);
      input.addEventListener("keydown", (e) => { if (e.key === "Enter") save(); });
    });

    // --- Klub ---
    const savedClub = localStorage.getItem("userClub");
    if (savedClub) clubDisplay.textContent = savedClub;

    editClubBtn.addEventListener("click", () => {
      const current = clubDisplay.textContent;
      const newVal = prompt("Podaj nazwƒô klubu:", current);
      if (newVal && newVal.trim() !== "") {
        clubDisplay.textContent = newVal;
        localStorage.setItem("userClub", newVal);
      }
    });

    // --- Kategorie wiekowe (multi-select) ---
    const savedCategories = JSON.parse(localStorage.getItem("userCategories") || "[]");
    if (savedCategories.length) categoriesDisplay.textContent = savedCategories.join(", ");

    editCategoriesBtn.addEventListener("click", () => {
      const options = ["U6","U7","U8","U9","U10","U11","U12","U13","U14","U15","U16","U17","U18","U19"];
      const currentValues = savedCategories;

      const overlay = document.createElement("div");
      overlay.style.cssText = "position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000;";

      const box = document.createElement("div");
      box.style.cssText = "background:rgba(0,50,0,0.95);padding:25px 35px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.6);color:#fff;font-family:'Montserrat',sans-serif;font-size:16px;";
      box.innerHTML = "<h3 style='text-align:center;margin-bottom:15px;'>Wybierz kategorie wiekowe:</h3>";

      options.forEach(opt => {
        const label = document.createElement("label");
        label.style.display = "block";
        label.style.marginBottom = "6px";
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.value = opt;
        checkbox.style.marginRight = "8px";
        checkbox.style.accentColor = "#e63946";
        if (currentValues.includes(opt)) checkbox.checked = true;
        label.appendChild(checkbox);
        label.append(opt);
        box.appendChild(label);
      });

      const btnContainer = document.createElement("div");
      btnContainer.style.display = "flex";
      btnContainer.style.justifyContent = "space-between";
      btnContainer.style.marginTop = "20px";

      const saveBtn = document.createElement("button");
      saveBtn.textContent = "Zapisz";
      saveBtn.style.cssText = "padding:8px 18px;border:none;border-radius:8px;background:#e63946;color:#fff;cursor:pointer;flex:1;margin-right:10px;";

      const cancelBtn = document.createElement("button");
      cancelBtn.textContent = "Anuluj";
      cancelBtn.style.cssText = "padding:8px 18px;border:none;border-radius:8px;background:#444;color:#fff;cursor:pointer;flex:1;";

      btnContainer.appendChild(saveBtn);
      btnContainer.appendChild(cancelBtn);
      box.appendChild(btnContainer);
      overlay.appendChild(box);
      document.body.appendChild(overlay);

      saveBtn.onclick = () => {
        const selected = [...box.querySelectorAll("input:checked")].map(cb => cb.value);
        localStorage.setItem("userCategories", JSON.stringify(selected));
        categoriesDisplay.textContent = selected.join(", ");
        document.body.removeChild(overlay);
      };

      cancelBtn.onclick = () => document.body.removeChild(overlay);
    });
  });
  </script>
</body>
</html>
