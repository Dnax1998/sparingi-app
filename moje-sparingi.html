
<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Moje sparingi ‚Äì ZgranyTrener.pl</title>

    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="../style-profil.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet"/>

    <style>
      body {
        margin: 0;
        font-family: "Montserrat", sans-serif;
        background: url("profil/background.jpg") no-repeat center center fixed;
        background-size: cover;
        color: white;
      }

      header .logo {
        position: absolute;
        top: 15px;
        left: 25px;
        display: flex;
        align-items: center;
      }
      header .logo img { height: 48px; }
      header .logo span { margin-left: 10px; font-weight: 700; font-size: 18px; }

      .page-container {
        padding: 100px 5%;
      }

      h1 {
        text-align: center;
        margin-bottom: 30px;
      }

      .match-item {
        background: rgba(255,255,255,0.08);
        margin-bottom: 12px;
        padding: 12px 14px;
        border-radius: 12px;
        line-height: 1.5;
      }

      .match-item strong { color: #1db954; }

      .back-btn {
        display: block;
        text-align: center;
        margin-top: 25px;
        color: white;
        text-decoration: none;
        font-weight: 600;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="logo">
        <img src="profil/logo.png" alt="Logo" />
        <span>ZgranyTrener.pl</span>
      </div>
    </header>

    <main>
      <div class="page-container">
        <h1>‚úÖ Moje zaakceptowane sparingi</h1>
        <div id="my-matches"></div>
        <a href="spotkania.html" class="back-btn">‚Üê Powr√≥t do og√≥lnych sparing√≥w</a>
      </div>
    </main>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
      import {
        getFirestore,
        collection,
        query,
        where,
        onSnapshot
      } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBXwR3VojWtQLA6FsXj2pVQsSTWNNAUhb0",
        authDomain: "sparingi-app.firebaseapp.com",
        projectId: "sparingi-app",
        storageBucket: "sparingi-app.firebasestorage.app",
        messagingSenderId: "293859421755",
        appId: "1:293859421755:web:e98887fdc5fb4a79aef61e"
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      const container = document.getElementById("my-matches");

      onAuthStateChanged(auth, async (user) => {
        if (!user) {
          window.location.href = "index.html";
          return;
        }

        const q = query(collection(db, "zaakceptowane_sparingi"), where("acceptedBy", "==", user.uid));
        onSnapshot(q, (snapshot) => {
          container.innerHTML = "";
          if (snapshot.empty) {
            container.innerHTML = "<p>Nie zaakceptowa≈Çe≈õ jeszcze ≈ºadnych sparing√≥w.</p>";
            return;
          }

          snapshot.forEach((doc) => {
            const d = doc.data();
            const div = document.createElement("div");
            div.classList.add("match-item");
            div.innerHTML = `
              <strong>${d.team}</strong> (${d.category || "-"})<br>
              üèÜ ${d.level || "brak"} | ${d.matchType || "-"}<br>
              üìÖ ${d.date || "-"} ‚è∞ ${d.time || "-"}<br>
              ${d.location ? "üìç " + d.location + "<br>" : ""}
              <small>${d.notes || ""}</small>
            `;
            container.appendChild(div);
          });
        });
      });
    </script>
  </body>
</html>
